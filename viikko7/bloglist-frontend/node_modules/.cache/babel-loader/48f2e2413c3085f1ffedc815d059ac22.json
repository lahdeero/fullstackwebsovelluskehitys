{"ast":null,"code":"import _regeneratorRuntime from \"/home/eero/sites/fullstackwebsovelluskehitys/viikko7/bloglist-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/eero/sites/fullstackwebsovelluskehitys/viikko7/bloglist-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/eero/sites/fullstackwebsovelluskehitys/viikko7/bloglist-frontend/src/components/ListBlogs.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Togglable from './Togglable';\nimport NewBlog from './NewBlog';\nimport Blog from './Blog';\nimport { addBlogAction, likeBlogAction, removeBlogAction } from '../reducers/blogReducer';\nimport Notification from './Notification';\nimport { notifyAction } from '../reducers/notificationReducer';\n\nvar ListBlogs = function ListBlogs(props) {\n  var newBlogRef = React.createRef();\n\n  var byLikes = function byLikes(b1, b2) {\n    return b2.likes - b1.likes;\n  };\n\n  var notify = function notify(message) {\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'success';\n    props.notifyAction(message, type, 5);\n  };\n\n  var createBlog =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(blog) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              newBlogRef.current.toggleVisibility();\n              props.addBlogAction(blog).then(function (createdBlog) {\n                return notify(\"a new blog \".concat(createdBlog.title, \" by \").concat(createdBlog.author, \" added\"));\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function createBlog(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var likeBlog = function likeBlog(blog) {\n    props.likeBlogAction(blog).then(function (updatedBlog) {\n      return notify(\"blog \".concat(updatedBlog.title, \" by \").concat(updatedBlog.author, \" liked!\"));\n    });\n  };\n\n  var removeBlog = function removeBlog(blog) {\n    var ok = window.confirm(\"remove blog \".concat(blog.title, \" by \").concat(blog.author));\n\n    if (ok) {\n      props.removeBlogAction(blog).then(function (removedBlog) {\n        return notify(\"blog \".concat(removedBlog.title, \" by \").concat(removedBlog.author, \" removed!\"));\n      });\n    }\n  };\n\n  console.log(props.blogs);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, \"blogs\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, props.user && props.user.name, \" logged in\"), React.createElement(\"button\", {\n    onClick: props.handleLogout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, \"logout\"), React.createElement(Togglable, {\n    buttonLabel: \"create new\",\n    ref: newBlogRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(NewBlog, {\n    createBlog: createBlog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  })), props.blogs.sort(byLikes).map(function (blog) {\n    return React.createElement(Blog, {\n      key: blog.id,\n      blog: blog,\n      like: likeBlog,\n      remove: removeBlog,\n      user: props.user,\n      creator: blog.user.username === props.user.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    });\n  }));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    blogs: state.blogs,\n    user: state.user\n  };\n};\n\nvar mapDispatchToProps = {\n  addBlogAction: addBlogAction,\n  likeBlogAction: likeBlogAction,\n  removeBlogAction: removeBlogAction,\n  notifyAction: notifyAction\n};\nvar ConnectedListBlogs = connect(mapStateToProps, mapDispatchToProps)(ListBlogs);\nexport default ConnectedListBlogs;","map":{"version":3,"sources":["/home/eero/sites/fullstackwebsovelluskehitys/viikko7/bloglist-frontend/src/components/ListBlogs.js"],"names":["React","connect","Togglable","NewBlog","Blog","addBlogAction","likeBlogAction","removeBlogAction","Notification","notifyAction","ListBlogs","props","newBlogRef","createRef","byLikes","b1","b2","likes","notify","message","type","createBlog","blog","current","toggleVisibility","then","createdBlog","title","author","likeBlog","updatedBlog","removeBlog","ok","window","confirm","removedBlog","console","log","blogs","user","name","handleLogout","sort","map","id","username","mapStateToProps","state","mapDispatchToProps","ConnectedListBlogs"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport Togglable from './Togglable'\nimport NewBlog from './NewBlog'\nimport Blog from './Blog'\nimport { addBlogAction, likeBlogAction, removeBlogAction } from '../reducers/blogReducer'\nimport Notification from './Notification'\nimport { notifyAction } from '../reducers/notificationReducer'\n\nconst ListBlogs = (props) => {\n\n  const newBlogRef = React.createRef()\n\n  const byLikes = (b1, b2) => b2.likes - b1.likes\n\n  const notify = (message, type = 'success') => {\n    props.notifyAction(message, type, 5)\n  }\n\n  const createBlog = async (blog) => {\n    newBlogRef.current.toggleVisibility()\n    props.addBlogAction(blog).then(createdBlog => \n      notify(`a new blog ${createdBlog.title} by ${createdBlog.author} added`))\n  }\n\n  const likeBlog = (blog) => {\n    props.likeBlogAction(blog).then(updatedBlog =>\n      notify(`blog ${updatedBlog.title} by ${updatedBlog.author} liked!`))\n  }\n\n  const removeBlog = (blog) => {\n    const ok = window.confirm(`remove blog ${blog.title} by ${blog.author}`)\n    if (ok) {\n      props.removeBlogAction(blog).then(removedBlog =>\n        notify(`blog ${removedBlog.title} by ${removedBlog.author} removed!`))\n    }\n  }\n  console.log(props.blogs)\n  return (\n    <div>\n      <h2>blogs</h2>\n\n      <p>{props.user && props.user.name} logged in</p>\n      <button onClick={props.handleLogout}>logout</button>\n\n      <Togglable buttonLabel='create new' ref={newBlogRef}>\n        <NewBlog createBlog={createBlog} />\n      </Togglable>\n\n      {props.blogs.sort(byLikes).map(blog =>\n        <Blog\n          key={blog.id}\n          blog={blog}\n          like={likeBlog}\n          remove={removeBlog}\n          user={props.user}\n          creator={blog.user.username === props.user.username}\n        />\n      )}\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    blogs: state.blogs,\n    user: state.user\n  }\n}\n\nconst mapDispatchToProps = {\n  addBlogAction,\n  likeBlogAction,\n  removeBlogAction,\n  notifyAction\n}\n\nconst ConnectedListBlogs = connect(mapStateToProps, mapDispatchToProps)(ListBlogs)\n\nexport default ConnectedListBlogs"]},"metadata":{},"sourceType":"module"}