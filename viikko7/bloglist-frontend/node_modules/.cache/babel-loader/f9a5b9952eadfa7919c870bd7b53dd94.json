{"ast":null,"code":"import _objectSpread from \"/home/eero/sites/fullstackwebsovelluskehitys/viikko7/bloglist-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/home/eero/sites/fullstackwebsovelluskehitys/viikko7/bloglist-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/eero/sites/fullstackwebsovelluskehitys/viikko7/bloglist-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport blogService from '../services/blogs';\nexport var initializeBlogs = function initializeBlogs(blogs) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                dispatch({\n                  type: 'INIT',\n                  data: blogs\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var addBlogAction = function addBlogAction(blog) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(dispatch) {\n        var createdBlog;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return blogService.create(blog);\n\n              case 2:\n                createdBlog = _context2.sent;\n                dispatch({\n                  type: 'ADD',\n                  data: createdBlog\n                });\n                return _context2.abrupt(\"return\", createdBlog);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var likeBlogAction = function likeBlogAction(blog) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(dispatch) {\n        var updatedBlog;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return blogService.update(_objectSpread({}, blog, {\n                  likes: blog.likes + 1\n                }));\n\n              case 2:\n                updatedBlog = _context3.sent;\n                dispatch({\n                  type: 'LIKE',\n                  data: updatedBlog\n                });\n                return _context3.abrupt(\"return\", updatedBlog);\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var removeBlogAction = function removeBlogAction(blog) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref4 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(dispatch) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return blogService.remove(blog);\n\n              case 2:\n                response = _context4.sent;\n                console.log('response = ', response);\n                dispatch({\n                  type: 'REMOVE',\n                  data: blog\n                });\n                return _context4.abrupt(\"return\", true);\n\n              case 6:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function (_x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }()\n  );\n};\n\nvar blogReducer = function blogReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'INIT':\n      return action.data;\n\n    case 'ADD':\n      return state.concat(action.data);\n\n    case 'LIKE':\n      return state.map(function (b) {\n        return b.id === action.data.id ? action.data : b;\n      });\n\n    case 'REMOVE':\n      return state.filter(function (blog) {\n        return blog.id !== action.data.id;\n      });\n\n    default:\n      return state;\n  }\n};\n\nexport default blogReducer;","map":{"version":3,"sources":["/home/eero/sites/fullstackwebsovelluskehitys/viikko7/bloglist-frontend/src/reducers/blogReducer.js"],"names":["blogService","initializeBlogs","blogs","dispatch","type","data","addBlogAction","blog","create","createdBlog","likeBlogAction","update","likes","updatedBlog","removeBlogAction","remove","response","console","log","blogReducer","state","action","concat","map","b","id","filter"],"mappings":"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","sourcesContent":["import blogService from '../services/blogs'\n\nexport const initializeBlogs = (blogs) => {\n  return async dispatch => {\n    dispatch({\n      type: 'INIT',\n      data: blogs\n    })\n  }\n}\nexport const addBlogAction = (blog) => {\n  return async dispatch => {\n    const createdBlog = await blogService.create(blog)\n    dispatch({\n      type: 'ADD',\n      data: createdBlog\n    })\n    return createdBlog\n  }\n}\nexport const likeBlogAction = (blog) => {\n  return async dispatch => {\n    const updatedBlog = await blogService.update({...blog, likes: blog.likes + 1})\n    dispatch({\n      type: 'LIKE',\n      data: updatedBlog\n    })\n    return updatedBlog\n  }\n}\n\nexport const removeBlogAction = (blog) => {\n  return async dispatch => {\n    const response = await blogService.remove(blog)\n    console.log('response = ', response)\n    dispatch({\n      type: 'REMOVE',\n      data: blog\n    })\n    return true\n  }\n}\n\nconst blogReducer = (state = [], action) => {\n  switch (action.type) {\n    case 'INIT':\n      return action.data\n    case 'ADD':\n      return state.concat(action.data)\n    case 'LIKE':\n      return state.map(b => b.id === action.data.id ? action.data : b)\n    case 'REMOVE':\n      return state.filter(blog => blog.id !== action.data.id)\n    default:\n      return state\n  }\n}\n\nexport default blogReducer\n\n"]},"metadata":{},"sourceType":"module"}